mode: rule
allow-lan: true
bind-address: '*'
log-level: silent
unified-delay: true
ipv6: false
global-client-fingerprint: chrome
find-process-mode: strict
keep-alive-interval: 15
tcp-concurrent: false
tun:
  enable: true
  mtu: 9000
  device: clash
  stack: system
  dns-hijack:
  - any:53
  - tcp://any:53
  auto-route: true
  strict-route: false
  auto-redirect: true
  auto-detect-interface: true
profile:
  store-selected: true
  store-fake-ip: false
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    QUIC:
      ports:
      - 443
    TLS:
      ports:
      - 443
      - 8443
    HTTP:
      ports:
      - 80
      - 8080-8880
      override-destination: true
  sniffing:
  - tls
  - http
  port-whitelist:
  - 80
  - 443
dns:
  cache-algorithm: arc
  enable: true
  prefer-h3: false
  ipv6: false
  ipv6-timeout: 300
  default-nameserver:
  - 8.8.8.8
  - 8.8.4.4
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - '*.ntp.*'
    - 'time.*'
    - 'ntp.*'
    - 'pool.ntp.org'
    - 'localhost'
    - '*.google.com'
    - '*.facebook.com'
  nameserver:
  - 8.8.8.8
  - 1.1.1.1
  proxy-server-nameserver:
  - 112.215.203.246
  respect-rules: true
#𝙋𝙍𝙊𝙓𝙔 𝙂𝙍𝙊𝙐𝙋𝙎  
proxy-groups:
  - name: 🎛️ SELECTOR
    type: select
    proxies:
      - ⚡ BEST-PING
      - ⛈️ CLOUDFLARE
      - ⛅ PREMIUM
      - DIRECT
    icon: "https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/select.png"   

  - name: ⛈️ CLOUDFLARE
    type: select
    use:
      - CLOUDFLARE
    icon: "https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Cloudflare.png"   

  - name: ⛅ PREMIUM
    type: select
    use:
      - PREMIUM
    icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/icon/qure/color/iCloud.png"      

  - name: 🔞 NsfwBLOCK
    type: select
    proxies:
      - ⛈️ CLOUDFLARE
      - ⛅ PREMIUM
      - DIRECT
      - REJECT
    icon: "https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/others/18Plus.png"    

  - name: 🛑 AdsBLOCK
    type: select
    proxies:
      - ⛈️ CLOUDFLARE
      - ⛅ PREMIUM
      - DIRECT
      - REJECT
    icon: "https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/ad(6).png"    

  - name: ⚡ BEST-PING
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 1
    use:
      - CLOUDFLARE
    icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/icon/color/urltest.png"

#𝙋𝙍𝙊𝙓𝙔 𝙋𝙍𝙊𝙑𝙄𝘿𝙀𝙍𝙎
proxy-providers:
  CLOUDFLARE:
    type: http
    url: "https://raw.githubusercontent.com/FizxyNotsDev/CMFA-CONTROLLER/refs/heads/main/CLOUDFLARE.yaml"
    path: ./proxy_providers/CLOUDFLARE.yaml
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 36000
      icon: "https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Cloudflare.png"
      
  PREMIUM:
    type: http
    url: "https://raw.githubusercontent.com/FizxyNotsDev/CMFA-CONTROLLER/refs/heads/main/PREMIUM.yaml"
    path: ./proxy_providers/PREMIUM.yaml
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 36000
      icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/icon/qure/color/iCloud.png"  
      
#𝙍𝙐𝙇𝙀 𝙋𝙍𝙊𝙑𝙄𝘿𝙀𝙍𝙎
rule-providers:
  rule_basicads:
    type: http
    behavior: domain
    format: mrs
    path: ./rule_provider/rule_basicads.mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ads-all.mrs
    interval: 43200

  oisd_nsfw🔞:
    type: http
    behavior: domain
    format: mrs
    path: ./rule_provider/oisd_nsfw.mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-porn.mrs
    interval: 86400

#𝙍𝙐𝙇𝙀𝙎  
rules:
  - RULE-SET,rule_basicads,🛑 AdsBLOCK
  - RULE-SET,oisd_nsfw🔞,🔞 NsfwBLOCK
  - NETWORK,udp,⛅ PREMIUM
  - NETWORK,tcp,⛈️ CLOUDFLARE
  - IN-TYPE,inner,🎛️ SELECTOR
  - MATCH,🎛️ SELECTOR  
